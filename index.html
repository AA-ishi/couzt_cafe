<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãŠã™ã™ã‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¬ãƒãƒ£</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 2em; background: #fefefe; }
    h1 { font-size: 1.5em; margin-bottom: 1em; }
    #result { margin-top: 2em; font-size: 1.2em; white-space: pre-line; }
    #gachaIcon { width: 120px; cursor: pointer; transition: transform 0.2s; }
    #gachaIcon:hover { transform: scale(1.1); }
    input[type="file"] { margin-top: 1em; }
  </style>
</head>
<body>
  <h1>ğŸ² ä»Šæ—¥ã®ãŠã™ã™ã‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¬ãƒãƒ£</h1>

  <!-- CSVãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ -->
  <input type="file" id="csvFile" accept=".csv">

  <!-- ã‚¬ãƒãƒ£ã‚¢ã‚¤ã‚³ãƒ³ -->
  <div>
    <img src="gacha-icon.png" alt="ã‚¬ãƒãƒ£ã‚’å›ã™" id="gachaIcon" onclick="pickRandom()">
  </div>

  <!-- çµæœè¡¨ç¤º -->
  <div id="result"></div>

  <script>
    let data = [];

    // CSVèª­ã¿è¾¼ã¿å‡¦ç†
    document.getElementById('csvFile').addEventListener('change', function(e) {
      const reader = new FileReader();
      reader.onload = function() {
        const lines = reader.result.split('\n').slice(1); // ãƒ˜ãƒƒãƒ€ãƒ¼é™¤å»
        data = lines.map(line => {
          const [menu, comment] = line.trim().split(',');
          return { menu, comment };
        }).filter(item => item.menu && item.comment);
      };
      reader.readAsText(e.target.files[0]);
    });

    // ã‚¬ãƒãƒ£ã‚’å›ã™å‡¦ç†
    function pickRandom() {
      if (data.length === 0) {
        document.getElementById('result').innerText = 'CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„';
        return;
      }
      const item = data[Math.floor(Math.random() * data.length)];
      document.getElementById('result').innerText = `ğŸ‰ã€Œ${item.menu}ã€\n${item.comment}`;
    }
  </script>
</body>
</html>